import{W as u,S as c,a as g}from"./three.module-Cdr6prlM.js";/* empty css               */import{g as w}from"./lil-gui.module.min-Vka56b52.js";import{T as f}from"./TilesRenderer-CeXRket9.js";import{T as h}from"./TilesFadePlugin-CvZ_qsK2.js";import{U as P}from"./UpdateOnChangePlugin-CWnEQ7XL.js";import{X as T}from"./EPSGTilesPlugin-zoCLijLZ.js";import{E as C}from"./EnvironmentControls-BxHxh8we.js";import{G as x}from"./GlobeControls-zx-2mbFa.js";import"./I3DMLoader-CCE0l15Y.js";import"./readMagicBytes-B3HEinov.js";import"./GLTFLoader-MuDEHmgM.js";import"./Ellipsoid-CuSwTtSS.js";import"./B3DMLoader-BP7KbjDP.js";import"./PNTSLoader-C1N3YT1_.js";import"./CMPTLoader-Asj2gLWV.js";import"./EllipsoidRegion-DVo7AClK.js";import"./TiledImageSource-BrtEEhz2.js";let e,o,t,n,r;const s={errorTarget:1,planar:!1},a=R(m);E();m();function E(){t=new u({antialias:!0}),t.setPixelRatio(window.devicePixelRatio),t.setSize(window.innerWidth,window.innerHeight),t.setClearColor(1118481),document.body.appendChild(t.domElement),o=new c,r=new g(60,window.innerWidth/window.innerHeight,.001,1e4),l(),p(),window.addEventListener("resize",p,!1);const i=new w;i.add(s,"planar").onChange(l),i.add(s,"errorTarget",1,40).onChange(()=>{n.getPluginByName("UPDATE_ON_CHANGE_PLUGIN").needsUpdate=!0}),i.open()}function l(){n&&n.dispose(),e&&e.dispose(),n=new f("https://tile.openstreetmap.org/{z}/{x}/{y}.png"),n.registerPlugin(new h({maximumFadeOutTiles:200})),n.registerPlugin(new P),n.registerPlugin(new T({center:!0,shape:s.planar?"planar":"ellipsoid"})),n.lruCache.minSize=900,n.lruCache.maxSize=1300,n.parseQueue.maxJobs=3,n.setCamera(r),o.add(n.group),s.planar?(n.errorTarget=1,e=new C(o,r,t.domElement),e.setTilesRenderer(n),e.enableDamping=!0,e.minZoomDistance=2,e.minDistance=.01,e.maxDistance=5e3,e.cameraRadius=0,e.fallbackPlane.normal.set(0,0,1),e.up.set(0,0,1),e.camera.position.set(0,0,2e3),e.camera.quaternion.identity(),r.near=.001,r.far=1e4,r.updateProjectionMatrix()):(n.group.rotation.x=-Math.PI/2,e=new x(o,r,t.domElement),e.setTilesRenderer(n),e.enableDamping=!0,e.camera.position.set(0,0,1.75*1e7),e.camera.quaternion.identity(),e.minDistance=150),e.addEventListener("change",a),e.addEventListener("end",a),n.addEventListener("needs-render",a),n.addEventListener("needs-update",a),m()}function p(){const i=window.innerWidth/window.innerHeight;r.aspect=i,r.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight),a()}function m(){e.update(),r.updateMatrixWorld(),n.errorTarget=s.errorTarget,n.setCamera(r),n.setResolutionFromRenderer(r,t),n.update(),t.render(o,r)}function R(i){let d=!1;return()=>{d||(d=!0,requestAnimationFrame(()=>{d=!1,i()}))}}
